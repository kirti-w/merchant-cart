<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Orders for {{customer.name}}</h3>
    <a href="/admin/customers" class="btn btn-secondary">
      Back to Customers
    </a>
  </div>

  {{#if error}}
    <div class="alert alert-danger">
      Unable to delete order. Please try again.
    </div>
  {{/if}}

  {{#if orders.length}}

    {{#each orders}}
      <div class="card mb-3 shadow">

        <div
          class="card-header bg-light d-flex justify-content-between align-items-center"
        >
          <div>
            <strong>Order ID:</strong>
            {{this._id}}
          </div>

          <div>
            <span class="badge bg-info me-2">
              {{this.status}}
            </span>

 <a
            href="/admin/orders/{{this._id}}/edit"
            class="btn btn-sm btn-warning"
                            {{#if (eq this.status "COMPLETED")}}disabled{{/if}}>

            Edit
          </a>  


            <!-- DELETE BUTTON -->
            <form
              method="POST"
              action="/admin/orders/{{this._id}}/delete"
              style="display:inline;"
              onsubmit="return confirm('Are you sure you want to delete this order?');"
            >

              <button type="submit" class="btn btn-sm btn-danger"
                  {{#if (eq this.status "COMPLETED")}}disabled{{/if}}>
                Delete
              </button>              
            </form>

         

         

          </div>
        </div>

        <div class="card-body">

          <ul class="list-group mb-3">
            {{#each this.items}}
              <li class="list-group-item d-flex justify-content-between">
                <span>{{this.product.name}}</span>
                <span>${{this.product.price}}</span>
                <span>Qty: {{this.quantity}}</span>
              </li>
            {{/each}}
          </ul>

          <p><strong>Total:</strong> ${{this.totalAmount}}</p>
          <p><strong>Placed:</strong> {{formatDate this.orderDate}}</p>

        </div>

      </div>
    {{/each}}

  {{else}}

    <div class="alert alert-info">
      This customer has no orders.
    </div>

  {{/if}}

</div>